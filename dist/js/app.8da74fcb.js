(function(t){function e(e){for(var n,r,i=e[0],l=e[1],c=e[2],u=0,m=[];u<i.length;u++)r=i[u],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&m.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(e);while(m.length)m.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,r=1;r<a.length;r++){var l=a[r];0!==o[l]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},o={app:0},s=[];function r(t){return i.p+"js/"+({"sign-up":"sign-up",trash:"trash"}[t]||t)+"."+{"sign-up":"960c702d",trash:"58bc97ea"}[t]+".js"}function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.e=function(t){var e=[],a=o[t];if(0!==a)if(a)e.push(a[2]);else{var n=new Promise((function(e,n){a=o[t]=[e,n]}));e.push(a[2]=n);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=r(t);var c=new Error;s=function(e){l.onerror=l.onload=null,clearTimeout(u);var a=o[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+n+": "+s+")",c.name="ChunkLoadError",c.type=n,c.request=s,a[1](c)}o[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/kvittering/",i.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var d=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"05ac":function(t,e,a){},"0e77":function(t,e,a){"use strict";a("e30a")},1743:function(t,e,a){"use strict";a("05ac")},"194b":function(t,e,a){"use strict";a("a9e3")},"397f":function(t,e,a){"use strict";a("4eb6")},"4eb6":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var n=a("2b0e"),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pb-100",attrs:{id:"app"}},[e("navbar"),e("div",{attrs:{id:"top"}},[e("router-view")],1),e("top-button")],1)},s=[],r=function(){var t=this,e=t._self._c;return e("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"primary",sticky:""}},[e("b-navbar-brand",{attrs:{to:{name:"Home"}}},[t._v("kvittering")]),t.user?[e("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),e("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[e("b-navbar-nav",[e("b-nav-item",{staticClass:"nav-link",attrs:{active:"Home"===t.$route.name,to:{name:"Home"}}},[e("b-icon",{attrs:{icon:"files","aria-hidden":"true"}}),t._v(" Documents")],1),e("b-nav-item",{staticClass:"nav-link",attrs:{active:"Trash"===t.$route.name,to:{name:"Trash"}}},[e("b-icon",{attrs:{icon:"trash","aria-hidden":"true"}}),t._v(" Trash")],1),e("b-nav-item",{staticClass:"nav-link",on:{click:t.logout}},[t._v("Sign out")])],1)],1)]:t._e()],2)},i=[],l=(a("14d9"),a("d0b9")),c=a("8f77"),u=a("11a5"),d=a("5843"),m=a("042b"),p=a("4711"),f={name:"Navbar",components:{BNavbar:l["a"],BNavbarBrand:c["a"],BNavbarToggle:u["a"],BCollapse:d["a"],BNavbarNav:m["a"],BNavItem:p["a"]},computed:{user(){return this.$store.state.user}},methods:{async logout(){await this.$appwrite.account.deleteSessions(),this.$store.commit("setUser",null),await this.$router.push({name:"Login"})}}},h=f,v=(a("397f"),a("2877")),b=Object(v["a"])(h,r,i,!1,null,"e9523402",null),g=b.exports,y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"u-text-center pb-24"},[t.show?e("b-button",{directives:[{name:"scroll-to",rawName:"v-scroll-to",value:"#top",expression:"'#top'"}],staticClass:"top-button text-white",attrs:{title:"To top",variant:"secondary"}},[e("b-icon",{staticClass:"text-white",attrs:{icon:"chevron-up","aria-hidden":"true"}})],1):t._e()],1)},w=[],_=a("1947"),D={name:"TopButton",components:{BButton:_["a"]},data:()=>({show:!1}),mounted(){window.addEventListener("scroll",this.onScroll)},destroyed(){window.addEventListener("scroll",this.onScroll)},methods:{onScroll(){const t=document.documentElement.scrollTop||document.body.scrollTop;this.show=t>1e3}}},C=D,x=(a("1743"),Object(v["a"])(C,y,w,!1,null,"5c7e47ff",null)),$=x.exports,k={components:{TopButton:$,Navbar:g}},j=k,O=(a("194b"),Object(v["a"])(j,o,s,!1,null,null,null)),S=O.exports,T=a("9483");Object(T["a"])("/kvittering/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var E=a("8c4f"),B=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home container mt-4"},[e("div",{staticClass:"u-flex-wrap mx-12 u-flex u-flex--space-between u-flex--vertical-align"},[e("div",{staticClass:"col-12 col-md-6 px-0 u-flex u-flex--vertical-end mb-24"},[e("h1",{staticClass:"mb-0 mr-12 h2"},[e("b-icon",{attrs:{icon:"files","aria-hidden":"true"}}),t._v(" Documents "),e("small",{staticClass:"text-muted"},[t._v("("+t._s(t.numDocuments)+")")])],1),e("b-button",{attrs:{variant:"secondary",title:"Add document",squared:""},on:{click:function(e){t.showAddModal=!0}}},[e("b-icon",{attrs:{icon:"plus","aria-hidden":"true"}})],1)],1),t.documents.length?e("div",{staticClass:"col-12 col-md-3 px-0 row u-flex--vertical-align"},[t._m(0),e("div",{staticClass:"col-12 col-sm-7"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.sortBy,expression:"sortBy"}],staticClass:"form-control d-inline",attrs:{id:"sortby"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortBy=e.target.multiple?a:a[0]}}},[e("option",{attrs:{value:"updated_desc"}},[t._v("Changed")]),e("option",{attrs:{value:"date"}},[t._v("Date ASC")]),e("option",{attrs:{value:"date_desc"}},[t._v("Date DESC")]),e("option",{attrs:{value:"title"}},[t._v("Title A-Z")]),e("option",{attrs:{value:"title_desc"}},[t._v("Title Z-A")])])])]):t._e()]),t.documents.length?[e("div",{staticClass:"search__wrapper form-group mt-24 px-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search for document..."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),e("button",{staticClass:"u-reset-button search__clear p-0",attrs:{title:"Clear"},on:{click:function(e){t.search=""}}},[e("b-icon",{attrs:{icon:"x"}})],1)]),t.sortedFilteredDocuments.length?e("div",{staticClass:"u-flex u-flex-wrap mt-5"},t._l(t.sortedFilteredDocuments,(function(a){return e("div",{key:a.id,staticClass:"col-12 col-md-3 mb-4"},[e("document-thumb",t._b({on:{edit:t.onEdit,trash:t.onTrash}},"document-thumb",a,!1))],1)})),0):e("div",{staticClass:"u-flex u-flex--center mt-5 h3 text-muted u-text-center px-12"},[t._v("No documents found with your criteria.")])]:e("div",{staticClass:"u-flex u-flex--center mt-5 h3 text-muted u-text-center px-12"},[t._v("You have not uploaded any documents yet.")]),t.showAddModal?e("add-document-modal",{on:{close:function(e){t.showAddModal=!1},add:t.loadDocuments}}):t._e(),t.selectedDocumentToEdit&&t.showEditModal?e("edit-document-modal",{attrs:{document:t.selectedDocumentToEdit},on:{close:function(e){t.showEditModal=!1},edit:t.loadDocuments}}):t._e()],2)},A=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-12 col-sm-5 u-text-right@desktop"},[e("label",{attrs:{for:"sortby"}},[e("small",{staticClass:"font-weight-bold"},[t._v("Sort by")])])])}],F=a("e3ee"),M=a("0759"),L=a("b17e"),P=a("b166");const q=(t,e)=>{const[a,n="asc"]=e.split("_"),o="asc"===n,s=["updated"].includes(a),r=Object(L["f"])(Object(L["h"])(null,a),Object(L["k"])(Object(L["c"])(String),L["j"])),i=(t,e)=>{let a=r(t),n=r(e);return s&&(a=parseInt(Object(P["a"])(new Date(a),"T")),n=parseInt(Object(P["a"])(new Date(n),"T"))),Object(L["c"])(String,a)&&Object(L["c"])(String,n)?a.localeCompare(n):a===n?0:a<n?-1:1};return Object(L["i"])(o?i:Object(L["b"])(i),t)};var N=a("7097"),I=function(){var t=this,e=t._self._c;return e("b-modal",{ref:"modal",attrs:{"hide-footer":"",centered:""},on:{hide:function(e){return t.$emit("close")}},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v(" Add document ")]},proxy:!0}])},[e("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"title"}},[t._v("Title "),e("sup",{attrs:{title:"Mandatory"}},[t._v("*")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",required:""},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"date"}},[t._v("Date")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.date,expression:"form.date"}],staticClass:"form-control",attrs:{type:"date",id:"date"},domProps:{value:t.form.date},on:{input:function(e){e.target.composing||t.$set(t.form,"date",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"file"}},[t._v("File "),e("sup",{attrs:{title:"Mandatory"}},[t._v("*")])]),e("drop-file",{model:{value:t.form.file,callback:function(e){t.$set(t.form,"file",e)},expression:"form.file"}})],1),e("b-button",{attrs:{type:"submit",variant:"secondary",block:""}},[t.isLoading?e("b-spinner",{attrs:{small:""}}):[t._v("Submit")]],2),e("b-button",{attrs:{type:"button",variant:"dark",block:""},on:{click:function(e){return t.$emit("close")}}},[t._v("Cancel")])],1)])},U=[],H=a("6aac"),V=a("01e3"),z=function(){var t=this,e=t._self._c;return e("div",[t.value?e("div",[e("small",[t._v("Selected file: "+t._s(t.value.name))]),e("button",{staticClass:"drop-file__icon u-reset-button text-danger",attrs:{title:"Datei entfernen"},on:{click:function(e){return t.$emit("input",null)}}},[e("b-icon",{staticClass:"h5",attrs:{icon:"x","aria-hidden":"true"}})],1)]):[e("div",{ref:"dropFile",staticClass:"drop-file u-flex u-flex--center p-24 u-text-center",on:{drop:t.handleFileDrop,click:t.triggerClick}},[e("span",{staticClass:"text-mute"},[t.dragAndDropEnabled?[t._v("Drop file or click to choose")]:[t._v("Drag and Drop is not supported")]],2),e("input",{ref:"file",staticClass:"u-display-none",attrs:{type:"file",accept:t.allowedTypes.join(",")},on:{change:t.onBrowseFile}})]),e("small",{staticClass:"text-muted"},[t._v("Allowed file types: "+t._s(t.allowedTypesString))])],t.error?e("p",{staticClass:"text-error"},[t._v(t._s(t.error))]):t._e()],2)},J=[];const R=["application/pdf","image/jpeg","image/png"];var Z={name:"DropFile",components:{BIcon:M["a"]},props:{value:{type:File,default:null},allowedTypes:{type:Array,default:()=>R}},data:()=>({dragAndDropEnabled:!1,error:"",browsedFile:null}),computed:{allowedTypesString(){const t=this.allowedTypes.map(t=>Object(L["g"])(1,t.split("/")).toUpperCase());return t.join(", ")}},watch:{async value(t){!t&&this.dragAndDropEnabled&&(await this.$nextTick(),this.bindEvents())}},mounted(){this.dragAndDropEnabled=this.isDragAndDropCapable(),this.dragAndDropEnabled&&this.bindEvents()},methods:{bindEvents(){["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach(function(t){var e;null===(e=this.$refs)||void 0===e||e.dropFile.addEventListener(t,function(t){t.preventDefault(),t.stopPropagation()}.bind(this),!1)}.bind(this))},triggerClick(){this.$refs.file.click()},isDragAndDropCapable(){const t=document.createElement("div");return("draggable"in t||"ondragstart"in t&&"ondrop"in t)&&"FormData"in window&&"FileReader"in window},handleFileDrop(t){this.error="";const e=t.dataTransfer.files[0];this.allowedTypes.includes(null===e||void 0===e?void 0:e.type)?this.$emit("input",e):this.error=`File type ${e.type} is not allowed.`},onBrowseFile(t){var e;this.error="";const a=null===t||void 0===t||null===(e=t.target)||void 0===e?void 0:e.files[0];this.allowedTypes.includes(null===a||void 0===a?void 0:a.type)?this.$emit("input",a):this.error=`File type ${a.type} is not allowed.`}}},Y=Z,G=(a("7c92"),Object(v["a"])(Y,z,J,!1,null,"ad44cf7c",null)),K=G.exports,Q={name:"AddDocumentModal",components:{BModal:H["a"],BButton:_["a"],BSpinner:V["a"],DropFile:K},data(){return{isLoading:!1,form:{title:"",date:"",file:null}}},mounted(){this.$refs.modal.show()},methods:{async onSubmit(){this.isLoading=!0;try{let t=new Date;this.form.date&&(t=new Date(this.form.date));const e=await this.$appwrite.uploadFile(this.form.file);await this.$appwrite.addDocument(this.form.title,e,t),this.$emit("add"),this.$emit("close")}catch(t){console.log(t),this.$toast.open({type:"error",message:t.message})}finally{this.isLoading=!1}}}},W=Q,X=Object(v["a"])(W,I,U,!1,null,null,null),tt=X.exports,et=function(){var t=this,e=t._self._c;return e("b-modal",{ref:"modal",attrs:{"hide-footer":"",centered:""},on:{hide:function(e){return t.$emit("close")}},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v(" Edit document ")]},proxy:!0}])},[e("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"title"}},[t._v("Title "),e("sup",{attrs:{title:"Mandatory"}},[t._v("*")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",required:""},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"date"}},[t._v("Date")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.date,expression:"form.date"}],staticClass:"form-control",attrs:{type:"date",id:"date"},domProps:{value:t.form.date},on:{input:function(e){e.target.composing||t.$set(t.form,"date",e.target.value)}}})]),e("b-button",{attrs:{type:"submit",variant:"secondary",block:""}},[t.isLoading?e("b-spinner",{attrs:{small:""}}):[t._v("Submit")]],2),e("b-button",{attrs:{type:"button",variant:"dark",block:""},on:{click:function(e){return t.$emit("close")}}},[t._v("Cancel")])],1)])},at=[],nt={name:"EditDocumentModal",components:{BModal:H["a"],BButton:_["a"],BSpinner:V["a"]},props:{document:{type:Object,required:!0}},data(){return{isLoading:!1,form:{title:this.document.title,date:this.document.date?this.$date(Object(F["a"])(this.document.date),"yyyy-MM-dd"):""}}},mounted(){this.$refs.modal.show()},methods:{async onSubmit(){this.isLoading=!0;try{let t=new Date;this.form.date&&(t=new Date(this.form.date)),await this.$appwrite.updateDocument(this.document.id,this.form.title,t),this.$emit("edit"),this.$emit("close")}catch(t){console.log(t),this.$toast.open({type:"error",message:t.message})}finally{this.isLoading=!1}}}},ot=nt,st=Object(v["a"])(ot,et,at,!1,null,null,null),rt=st.exports,it={name:"Home",components:{AddDocumentModal:tt,EditDocumentModal:rt,BButton:_["a"],BIcon:M["a"],DocumentThumb:N["a"]},data(){return{isLoading:!1,search:"",sortBy:"updated_desc",documents:[],showAddModal:!1,showEditModal:!1,selectedDocumentToEdit:null}},computed:{numDocuments(){return this.documents.length},sortedFilteredDocuments(){return q(this.filteredDocuments,this.sortBy)},filteredDocuments(){const t=this.search;return this.documents.filter(e=>{if(t){const a=t.toLowerCase(),n=e.title.toLowerCase().includes(a),o=this.$date(Object(F["a"])(e.date),"dd/MM/yyyy").includes(a);if(!n&&!o)return!1}return!0})}},mounted(){this.loadDocuments()},methods:{async loadDocuments(){this.isLoading=!0;try{this.documents=await this.$appwrite.getPublishedDocuments()}catch(t){console.log(t),this.$toast.open({type:"error",message:t.message})}finally{this.isLoading=!1}},async onEdit(t){var e;const a=null!==(e=this.documents.find(e=>e.id===t))&&void 0!==e?e:null;a?(this.selectedDocumentToEdit=a,this.showEditModal=!0):this.$toast.open({type:"error",message:"An error occured. Please try again later."})},async onTrash(t){await this.$appwrite.trashDocument(t),await this.loadDocuments()}}},lt=it,ct=(a("a51c"),Object(v["a"])(lt,B,A,!1,null,"b177a8c2",null)),ut=ct.exports,dt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container u-full-height u-flex u-flex-col pt-4"},[e("div",{staticClass:"mb-24"},[e("h2",{staticClass:"u-text-normal mb-12"},[t._v("Sign into your account")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("div",{staticClass:"form-group mr-12"},[t._m(0),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.username,expression:"form.username"}],staticClass:"form-control",attrs:{id:"username",type:"email",autocomplete:"username",autofocus:"",required:""},domProps:{value:t.form.username},on:{input:function(e){e.target.composing||t.$set(t.form,"username",e.target.value)}}})]),e("div",{staticClass:"form-group mr-12"},[t._m(1),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"form-control",attrs:{id:"password",type:"password",autocomplete:"current-password",required:""},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}})]),e("b-button",{attrs:{type:"submit","is-loading":t.isLoading,variant:"secondary"}},[t._v("Login")])],1),e("p",{staticClass:"mt-4"},[t._v(" Don't have an account? "),e("router-link",{staticClass:"text-secondary",attrs:{to:{name:"SignUp"}}},[t._v("Register here")])],1)])])},mt=[function(){var t=this,e=t._self._c;return e("label",{attrs:{for:"username"}},[t._v("Email address "),e("sup",[t._v("*")])])},function(){var t=this,e=t._self._c;return e("label",{attrs:{for:"password"}},[t._v("Password "),e("sup",[t._v("*")])])}],pt={name:"Login",components:{BButton:_["a"]},data(){return{isLoading:!1,form:{username:"",password:""}}},methods:{async onSubmit(){if(!this.isLoading)if(this.formIsValid()){this.isLoading=!0;try{await this.$appwrite.account.createEmailSession(this.form.username,this.form.password);const{$id:t,name:e}=await this.$appwrite.account.get();this.$store.commit("setUser",{id:t,name:e}),await this.$router.push({name:"Home"})}catch(t){console.log(t),this.$toast.open({type:"error",message:t.message})}finally{this.isLoading=!1}}else this.$toast.open({type:"error",message:"Please provide email and password."})},formIsValid(){return!(!this.form.username||!this.form.password)}}},ft=pt,ht=Object(v["a"])(ft,dt,mt,!1,null,"914eeb44",null),vt=ht.exports,bt=a("1b3a");const gt="6470c65154b36af41c6b",yt="64714fed7784b98b15b8",wt="6470c658902140919aca",_t="published",Dt="trashed",Ct=(new bt["b"]).setEndpoint("https://cloud.appwrite.io/v1").setProject("6470c63577fec2e023c9"),xt=new bt["c"](Ct),$t=new bt["h"](Ct),kt=new bt["a"](Ct);var jt={client:Ct,account:kt,getPublishedDocuments:async()=>{const{documents:t}=await xt.listDocuments(gt,yt,[bt["f"].equal("status",_t)]);return Object(L["d"])(t=>Object(L["f"])(Object(L["e"])(["title","status","date","fileId"]),Object(L["a"])("id",t.$id))(t))(t)},getTrashedDocuments:async()=>{const{documents:t}=await xt.listDocuments(gt,yt,[bt["f"].equal("status",Dt)]);return Object(L["d"])(t=>Object(L["f"])(Object(L["e"])(["title","status","date","fileId"]),Object(L["a"])("id",t.$id))(t))(t)},addDocument:async(t,e,a)=>{const n=bt["d"].unique(),o=_t,{$id:s}=await kt.get(),r=bt["g"].user(s),i=[bt["e"].read(r),bt["e"].update(r),bt["e"].delete(r)];await xt.createDocument(gt,yt,n,{title:t,fileId:e,date:a,status:o,updated:new Date},i)},updateDocument:async(t,e,a)=>{await xt.updateDocument(gt,yt,t,{title:e,date:a,updated:new Date})},trashDocument:async t=>{await xt.updateDocument(gt,yt,t,{status:Dt})},untrashDocument:async t=>{await xt.updateDocument(gt,yt,t,{status:_t})},deleteDocument:async t=>{await xt.deleteDocument(gt,yt,t)},getFileUrl:async t=>await $t.getFileView(wt,t),getFileThumb:async t=>{const{href:e}=await $t.getFilePreview(wt,t);return e},uploadFile:async t=>{const{$id:e}=await kt.get(),a=bt["g"].user(e),n=[bt["e"].read(a),bt["e"].delete(a)],{$id:o}=await $t.createFile(wt,bt["d"].unique(),t,n);return o},deleteFile:async t=>{await $t.deleteFile(wt,t)}};n["a"].use(E["a"]);const Ot=[{path:"/",name:"Home",component:ut,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:vt},{path:"/sign-up",name:"SignUp",component:()=>a.e("sign-up").then(a.bind(null,"0687"))},{path:"/trash",name:"Trash",component:()=>a.e("trash").then(a.bind(null,"27c8")),meta:{requiresAuth:!0}}],St=new E["a"]({routes:Ot});St.beforeEach(async(t,e,a)=>{var n;let o=!1;try{o=await jt.account.get()}catch(s){}null!==(n=t.meta)&&void 0!==n&&n.requiresAuth&&!o&&a("login"),"Login"===t.name&&o&&a("/"),a()});var Tt=St,Et=a("2f62");n["a"].use(Et["a"]);var Bt=new Et["a"].Store({state:{user:null},mutations:{setUser(t,e){t.user=e}},actions:{async init({commit:t}){try{const{$id:e,name:a}=await jt.account.get();t("setUser",{id:e,name:a})}catch(e){}}},getters:{isAuthenticated:t=>null!==t.user}}),At=a("f13a"),Ft=a.n(At),Mt=(a("42bc"),a("4c9f")),Lt=a.n(Mt),Pt=a("b1e0"),qt=(a("5df9"),a("fe56"));n["a"].config.productionTip=!1,n["a"].prototype.$appwrite=jt,n["a"].use(Ft.a),n["a"].use(Lt.a),n["a"].use(Pt["a"]),n["a"].use(qt["a"]),new n["a"]({router:Tt,store:Bt,beforeCreate(){this.$store.dispatch("init")},render:t=>t(S)}).$mount("#app")},7097:function(t,e,a){"use strict";var n=function(){var t=this,e=t._self._c;return e("b-card",{staticClass:"document-thumb",scopedSlots:t._u([{key:"default",fn:function(){return[e("div",{staticClass:"card__image-wrapper"},[e("b-card-img",{staticClass:"card-img-top",attrs:{src:t.thumb}}),e("button",{staticClass:"view-overlay u-reset-button",class:{"view-overlay--show":t.showViewOverlay},attrs:{title:"Open document"},on:{click:t.openDocument}},[e("b-icon",{staticClass:"view-overlay__icon",attrs:{icon:"eye-fill","aria-hidden":"true"}})],1)],1),e("div",{staticClass:"p-18"},[e("h4",{staticClass:"card-title"},[t._v(t._s(t.title))]),t.actions.includes("edit")?e("b-button",{staticClass:"mr-2",attrs:{squared:"",variant:"outline-secondary",size:"sm",title:"Edit document"},on:{click:function(e){return t.$emit("edit",t.id)}}},[e("b-icon",{attrs:{icon:"pencil-fill","aria-hidden":"true"}}),t._v(" Edit ")],1):t._e(),t.actions.includes("trash")?e("b-button",{attrs:{squared:"",variant:"outline-danger",size:"sm",title:"Move to trash"},on:{click:function(e){return t.$emit("trash",t.id)}}},[e("b-icon",{attrs:{icon:"trash-fill","aria-hidden":"true"}}),t._v(" Trash ")],1):t._e(),t.actions.includes("untrash")?e("b-button",{staticClass:"mr-2",attrs:{squared:"",variant:"outline-secondary",size:"sm",title:"Move back to documents"},on:{click:function(e){return t.$emit("untrash",t.id)}}},[e("b-icon",{attrs:{icon:"arrow-left","aria-hidden":"true"}}),t._v(" Untrash ")],1):t._e(),t.actions.includes("delete")?e("b-button",{attrs:{squared:"",variant:"outline-danger",size:"sm",title:"Delete document permanently"},on:{click:function(e){return t.$emit("delete",{documentId:t.id,fileId:t.fileId})}}},[e("b-icon",{attrs:{icon:"trash-fill","aria-hidden":"true"}}),t._v(" Delete ")],1):t._e()],1)]},proxy:!0},{key:"footer",fn:function(){return[e("small",{staticClass:"text-muted"},[t._v(t._s(t.$date(new Date(t.date),"dd/MM/yyyy")))])]},proxy:!0}])})},o=[],s=a("1947"),r=a("205f"),i=a("2812"),l={name:"DocumentThumb",components:{BButton:s["a"],BCard:r["a"],BCardImg:i["a"]},props:{id:{type:String,required:!0},title:{type:String,required:!0},date:{type:String,required:!0},fileId:{type:String,required:!0},actions:{type:Array,default:()=>["edit","trash"]}},data:()=>({thumb:"",showViewOverlay:!1}),async mounted(){this.thumb=await this.$appwrite.getFileThumb(this.fileId)},methods:{async openDocument(){const{href:t}=await this.$appwrite.getFileUrl(this.fileId);setTimeout(()=>{window.open(t,"_blank","noreferrer")})}}},c=l,u=(a("0e77"),a("2877")),d=Object(u["a"])(c,n,o,!1,null,"1305a27d",null);e["a"]=d.exports},"7c92":function(t,e,a){"use strict";a("e1a9")},a51c:function(t,e,a){"use strict";a("ad95")},a9e3:function(t,e,a){},ad95:function(t,e,a){},e1a9:function(t,e,a){},e30a:function(t,e,a){}});
//# sourceMappingURL=app.8da74fcb.js.map